<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>DocStrap Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.slate.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">DocStrap</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-config_config.html">config/config</a></li><li><a href="module-config_passport.html">config/passport</a></li><li><a href="module-models_nodeserver.html">models/nodeserver</a></li><li><a href="module-models_user.html">models/user</a></li><li><a href="module-modules_db.html">modules/db</a></li><li><a href="module-modules_encryption.html">modules/encryption</a></li><li><a href="module-modules_helpers.html">modules/helpers</a></li><li><a href="module-modules_isy.html">modules/isy</a></li><li><a href="module-modules_logger.html">modules/logger</a></li><li><a href="module-modules_mqttc.html">modules/mqttc</a></li><li><a href="module-modules_mqtts.html">modules/mqtts</a></li><li><a href="module-modules_web.html">modules/web</a></li><li><a href="module-routes_frontend.html">routes/frontend</a></li><li><a href="module-routes_rest.html">routes/rest</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-models_nodeserver-DriverSchema.html">models/nodeserver~DriverSchema</a></li><li><a href="module-models_nodeserver-NodeSchema.html">models/nodeserver~NodeSchema</a></li><li><a href="module-models_nodeserver-NodeServerModel.html">models/nodeserver~NodeServerModel</a></li><li><a href="module-models_user-UserModel.html">models/user~UserModel</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	



    <h3>polyglot-v2 2.0.21</h3>









	
	





    <section class="readme-section">
        <article><h1>UDI Polyglot v2</h1><p>Polyglot is a Middleware between the <a href="http://www.universal-devices.com/">Universal Devices ISY Home Automation device</a> and any number of external devices and services.</p>
<p>Polyglot v2 is built on the <a href="http://mean.io/">MEAN</a> stack which is a production ready enterprise level code stack that includes:</p>
<ul>
<li>MongoDB (A NoSQL database engine that stores data in JSON formated 'documents')</li>
<li>Express (NodeJS HTTP API server module)</li>
<li>Angular.JS (Frontend framework developed by Google)</li>
<li>NodeJS (Fully asynchronous server side version of Javascript)</li>
</ul>
<p>Using these tools, along with the <a href="http://mqtt.org/">MQTT</a> messaging protocol, we have created a robust IoT powerhouse that can speak to any and every device available with open API standards using simple, straight-forward modules (NodeServers).</p>
<p>While most of the previous code had been written in Python, the event loop driven Node.JS was chosen for this platform due to its asynchronous nature. Python or ANY language can still be used to develop a NodeServer with the standard API interface available.</p>
<h3>Installation instructions</h3><p>Since Polyglot is an enterprise level application there are several steps to get it up and running, this will be an ongoing process in order to simplify it. These steps are outlined directly for the Raspberry Pi, specifically the 3 or 3b models which were used to test. This has also worked on the original Raspberry Pi (Armv6) as well. A pre-built script is <a href="https://github.com/Einstein42/udi-polyglotv2/raw/master/scripts/install.sh">here</a> to do all the heavy lifting for you. This install procedure was tested using a clean install of <a href="https://www.raspberrypi.org/downloads/raspbian/">Rasbian Stretch Lite</a>. Version <strong>September 2017</strong> at time of writing.</p>
<p>To Install Using the script (This will do EVERYTHING for you):</p>
<pre class="prettyprint source"><code># Run the Install Script
wget -qO - https://github.com/Einstein42/udi-polyglotv2/raw/master/scripts/install.sh | bash</code></pre><p>You do NOT need to proceed with theses instructions if you ran the script above. This is all done for you.</p>
<p>The manual steps are listed here as well.</p>
<p>Steps overview:</p>
<ul>
<li>Install MongoDB</li>
<li>Install Polyglot-v2</li>
</ul>
<h5>Prerequisites</h5><p><a href="https://www.mongodb.com/">MongoDB</a></p>
<pre class="prettyprint source"><code># Update your sources
sudo apt-get update -qy

# Install the MongoDB Server / git / Python3 / Curl
sudo apt-get -qqy install mongodb-server git python3-pip python3-dev curl

# Check MongoDB Status
systemctl status mongodb

● mongodb.service - An object/document-oriented database
   Loaded: loaded (/lib/systemd/system/mongodb.service; enabled)
   Active: active (running) since Thu 2017-07-13 03:35:41 UTC; 25min ago
     Docs: man:mongod(1)
 Main PID: 431 (mongod)
   CGroup: /system.slice/mongodb.service
           └─431 /usr/bin/mongod --config /etc/mongodb.conf</code></pre><h5>Polyglot</h5><p>Now the good stuff. Let's install Polyglot! Login as the user that is going to run Polyglot (pi or whatever you choose). Polyglot does NOT need to be run as root! (PLEASE DO NOT RUN POLYGLOT AS ROOT)</p>
<pre class="prettyprint source"><code># Create a polyglot directory
mkdir polyglot

# Enter polyglot directory
cd polyglot

# Get the Polyglot binary. This example is for armv7 Raspberry Pi 3/3b. (armv6 is RPi 1/Nano and x64 is most x86 linux boxes)
# If you don't know which one to get run the command 'lscpu' and look at the top line. 'Architecture'
wget -q https://github.com/Einstein42/udi-polyglotv2/raw/master/binaries/polyglot-v2-linux-armv7.tar.gz

# Extract the archive
tar -zxf polyglot-v2-linux-armv7.tar.gz

# Run Polyglot normally:
./polyglot-v2-linux-armv7

# OR

# Run Polyglot with debug logging turned on:
NODE_ENV=development ./polyglot-v2-linux-armv7</code></pre><p>To start Polyglot on Boot do the following:</p>
<pre class="prettyprint source"><code># Get base systemd script from the GitHub repository
wget -q https://github.com/Einstein42/udi-polyglotv2/raw/master/scripts/polyglot-v2.service

# Edit it for your system
nano polyglot-v2.service

# Modify the following sections in the polyglot-v2.service file
# Replace &lt;PWD> with the current directory that the polyglot binary resides in.
# Replace &lt;USER> with the user you want polyglot to run as
# Replace &lt;FILE> with the FULL path to the polyglot binary. e.g. /home/pi/polyglot/polyglot-v2-linux-armv7

# One the above changes are done to the polyglot-v2.service file, move it to the systemd unit folder
sudo mv polyglot-v2.service /lib/systemd/system/

# Add the service then start polyglot-v2
sudo systemctl enable polyglot-v2
sudo systemctl start polyglot-v2</code></pre><p>Verify that Polyglot is running</p>
<pre class="prettyprint source"><code># Check Polyglot status
sudo systemctl status polyglot-v2.service

● polyglot-v2.service - polyglot-v2
   Loaded: loaded (/lib/systemd/system/polyglot-v2.service; enabled)
   Active: active (running) since Thu 2017-07-13 04:38:53 UTC; 10min ago
 Main PID: 1647 (node)
   CGroup: /system.slice/polyglot-v2.service
           └─1647 node /usr/local/bin/polyglot-v2

Jul 13 04:38:53 raspberrypi systemd[1]: Started polyglot-v2.</code></pre><p>Default username and password are both <code>admin</code></p>
<p>Logs are located at <code>~/.polyglot/log/debug.log</code></p>
<pre class="prettyprint source"><code># Watch the logs real-time
tail -f ~/.polyglot/log/debug.log

7/13/2017, 4:24:15 AM - info: Starting Polyglot version 2.0
7/13/2017, 4:24:15 AM - info: MongoDB: Connected
7/13/2017, 4:24:16 AM - info: MQTT Services Started.
7/13/2017, 4:24:16 AM - info: Secure Server started on port 3000
7/13/2017, 4:24:16 AM - info: ISY: Got Version 5.0.10
7/13/2017, 4:24:16 AM - info: MQTT: Subscribe Successful udi/polyglot/connections/# QoS: 0
7/13/2017, 4:24:38 AM - info: Successful login by admin
7/13/2017, 4:24:39 AM - info: MQTT: Frontend Websockets interface  Connected.</code></pre><p>Enable debug logging for Polyglot</p>
<pre class="prettyprint source"><code># Edit the ~/.polyglot/.env file
nano ~/.polyglot/.env

# Add or modify the NODE_ENV variable
NODE_ENV=development</code></pre><h3>Development Documentation</h3><p>It is pre-built in the docs folder <a href="https://github.com/Einstein42/udi-polyglotv2">Found Here</a> on GitHub in HTML format if you clone the repository or available in the<br><a href="https://doclets.io/Einstein42/udi-polyglotv2/master/overview">Online Documentation Found Here</a>.</p>
<p>Prebuilt Python3 interface API for building NodeServers is <a href="https://github.com/Einstein42/udi-polyglot-interface">here</a>.</p>
<p>NodeJS interface API for building NodeServers is coming soon.</p></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	DocStrap Copyright © 2012-2015 The contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>
	
		on Fri Nov 3rd 2017
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>